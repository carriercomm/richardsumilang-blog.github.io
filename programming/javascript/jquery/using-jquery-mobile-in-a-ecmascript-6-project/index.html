<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="HandheldFriendly" content="True" />
<meta name="MobileOptimized" content="320" />
<meta name="language" content="english" />
<meta name="robots" content="all" />


<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />


<meta name="keywords" content="Babel, ECMAScript 6, JavaScript, jQuery Mobile, Node.js, NPM" />
<meta name="news_keywords" content="Babel, ECMAScript 6, JavaScript, jQuery Mobile, Node.js, NPM" />


<meta property="og:type" content="article" />

<meta property="og:title" content="Using jQuery mobile in a ECMAScript 6 project" />
<meta property="og:site_name" content="Top Secret Labs" />
<meta property="og:url" content="http://richardsumilang.com/programming/javascript/jquery/using-jquery-mobile-in-a-ecmascript-6-project/" />
<meta property="og:locale" content="en_US" />

  
  
  
  
  <meta property="article:published_time" content="2015-03-11" />
  <meta property="article:modified_time" content="2015-03-11" />




  <meta property="article:tag" content="Babel" /><meta property="article:tag" content="ECMAScript 6" /><meta property="article:tag" content="JavaScript" /><meta property="article:tag" content="jQuery Mobile" /><meta property="article:tag" content="Node.js" /><meta property="article:tag" content="NPM" />



<meta name="twitter:card" content="summary" />

<meta name="twitter:site" content="@rsumilang" />
<meta name="twitter:title" content="Using jQuery mobile in a ECMAScript 6 project - Top Secret Labs - Richard Sumilang" />
<meta name="twitter:creator" content="@rsumilang" />
<meta name="twitter:domain" content="richardsumilang.com" />



<meta name="generator" content="Hugo 0.14" />


  <base href="http://richardsumilang.com/" />
  <title>Using jQuery mobile in a ECMAScript 6 project - Top Secret Labs - Richard Sumilang</title>

  <link rel="canonical" href="http://richardsumilang.com/programming/javascript/jquery/using-jquery-mobile-in-a-ecmascript-6-project/" />
<link href="" rel="alternate" type="application/rss+xml" title="Top Secret Labs - Richard Sumilang" />


<link rel="stylesheet" type="text/css" href="http://richardsumilang.com/css/main.min.css" />


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png" />
<link rel="shortcut icon" href="http://richardsumilang.com/favicon.ico" />


<link href="" rel="alternate" type="application/rss+xml" title="Top Secret Labs - Richard Sumilang" />

</head>

<body>


<div id="logo">
  <a href="http://richardsumilang.com/"><img src="http://richardsumilang.com/images/header-logo.png" /></a>
</div>


<ul id="navigation">
  
  
  <li><a href="/categories/apps" >apps</a></li>
  
  <li><a href="/categories/electronics" >electronics</a></li>
  
  <li><a href="/categories/etc" >etc</a></li>
  
  <li><a href="/categories/networking" >networking</a></li>
  
  <li><a href="/categories/programming" >programming</a></li>
  
  <li><a href="/categories/servers" >servers</a></li>
  
  <li><a href="/categories/unix-like" >unix-like</a></li>
  
</ul>



<section id="articles">
  <article>
    

    <header class="heading">
      <h2><a href="http://richardsumilang.com/programming/javascript/jquery/using-jquery-mobile-in-a-ecmascript-6-project/">Using jQuery mobile in a ECMAScript 6 project</a></h2>
      
        <h3>Oh the pain...</h3>
      
    </header>

    <div class="details">
      

<p>I started using ECMAScript 6 in a project which required supporting the
dependencies I was upgrading from. I used <a href="https://babeljs.io/" title="Babel JS">Babel JS</a> to transpile my ES6 code
with <a href="http://browserify.org/" title="Browserify">browserify</a> and everything was working fine until I got to
<a href="http://jquerymobile.com/" title="jQuery Mobile">jQuery-mobile</a>.</p>

<p><img src="/images/reactions/why/jon-stewart.gif" class="center" /></p>

<p>After a quick inspection, I see that jQuery-mobile is having trouble binding
itself to the <code>root</code> aka <code>this</code> aka <code>window</code> object. This is because the way
jQuery-mobile is wrapped in a block where <code>this</code> is <code>undefined</code> because the
code is not being executed in the assumed scope.</p>

<h3 id="example:d3542b7334ad974552de49ebf1b76abe">Example:</h3>

<pre><code class="language-javascript">function(require,module,exports){
(function (global){
;__browserify_shim_require__=require;(function browserifyShim(module, exports, require, define, browserify_shim__define__module__export__) {
"use strict";(function(root, doc, factory){if(typeof define === "function" &amp;&amp; define.amd){define(["jquery"], function($){factory($, root, doc);return $.mobile;});}else {factory(root.jQuery, root, doc);}})(undefined || window, document, function(jQuery, window, document, undefine) {

/*!
* jQuery Mobile 1.4.5
* Git HEAD hash: 68e55e78b292634d3991c795f06f5e37a512decc <> Date: Fri Oct 31 2014 17:33:30 UTC
* http://jquerymobile.com
*
* Copyright 2010, 2014 jQuery Foundation, Inc. and othercontributors
* Released under the MIT license.
* http://jquery.org/license
*
*/

(function ( root, doc, factory ) {
    if ( typeof define === "function" &amp;&amp; define.amd ) {
        // AMD. Register as an anonymous module.
        define( [ "jquery" ], function ( $ ) {
            factory( $, root, doc );
            return $.mobile;
        });
    } else {
        // Browser globals
        factory( root.jQuery, root, doc );
    }
}( this, document, function ( jQuery, window, document, undefined ) {
(function( $ ) {
    $.mobile = {};
}( jQuery ));

// more jquery code
}</code></pre>

<p>The jQuery-mobile team doesn&rsquo;t want to make fixes for this because they would
have to continue to make patches for their code when another build system comes
out and whose got time to keep up with that? Needless to say, I wish they had
the time for it to make their libraries more compatible for users and they are a
bigger team than just little ole independent me but that&rsquo;s just my opinion.</p>

<p>Today is going on my 2nd day being stuck with the issue (also second day of
using gulp and browserify so give me a break) and I&rsquo;ve tried just about every
solution I can find on the web before I just gave up and wrote my own. Though,
not exactly the most elegant solution, I simply replaced all instances of <code>this</code>
to <code>this || window</code> and walla it worked.</p>

<p>Now I have jQuery-mobile working just fine in my ES6 project. I&rsquo;ve bundled my
changes up in a npm project under the name <strong>jquery-mobile-babel-safe</strong>. Here is
how I use it in my project:</p>

<h3 id="install:d3542b7334ad974552de49ebf1b76abe">Install</h3>

<p>Run this command in your project room:</p>

<pre><code>    npm install jquery-mobile-babel-safe --save
</code></pre>

<p><strong>package.json</strong></p>

<pre><code class="language-javascript">    "browser": {
      "jquery-mobile": "./node_modules/jquery-mobile-babel-safe/dist/jquery.mobile-1.4.5.js"
    },
    "browserify-shim": {
      "jquery-mobile": {
        "exports": "jQuery.mobile"
      }
    }</code></pre>

<p>And that&rsquo;s about it. You can test by importing <code>jquery-mobile</code> on your page. You
should have access to <code>$.mobile</code> in your scripts.</p>

<h3 id="wrap-up:d3542b7334ad974552de49ebf1b76abe">Wrap up&hellip;</h3>

<p>I&rsquo;d like to hear from you if you have a simpler way of making this work. I do
feel a little bad about polluting the npm package repository with yet another
jQuery package and I&rsquo;d like to know of a better way of doing this but I know a
few other people were stuck with this issue so be it.</p>

<p>Happy hacking!</p>

    </div>

    
    <div class="tags">
      
      <a href="/tags/babel">Babel</a>
      
      <a href="/tags/ecmascript-6">ECMAScript 6</a>
      
      <a href="/tags/javascript">JavaScript</a>
      
      <a href="/tags/jquery-mobile">jQuery Mobile</a>
      
      <a href="/tags/node.js">Node.js</a>
      
      <a href="/tags/npm">NPM</a>
      
    </div>
    

    <div class="meta">
      <i class="fa fa-clock-o"></i> Mar 11, 2015
      
        
          <a href="/categories/programming"><i class="fa fa-bookmark"></i> Programming</a>
        
      
    </div>

    <div class="share-buttons">
  <a title="Facebook Share" target="_blank" href="http://www.facebook.com/sharer.php?u=http%3a%2f%2frichardsumilang.com%2fprogramming%2fjavascript%2fjquery%2fusing-jquery-mobile-in-a-ecmascript-6-project%2f&t=Using%20jQuery%20mobile%20in%20a%20ECMAScript%206%20project"><span class="fa fa-facebook"></span></a>
  <a title="Twitter Share" target="_blank" href="http://twitter.com/intent/tweet?url=http%3a%2f%2frichardsumilang.com%2fprogramming%2fjavascript%2fjquery%2fusing-jquery-mobile-in-a-ecmascript-6-project%2f&text=Using%20jQuery%20mobile%20in%20a%20ECMAScript%206%20project&tw_p=tweetbutton"><span class="fa fa-twitter"></span></a>
  <a title="Google+ Share" target="_blank" href="https://plus.google.com/share?url=http%3a%2f%2frichardsumilang.com%2fprogramming%2fjavascript%2fjquery%2fusing-jquery-mobile-in-a-ecmascript-6-project%2f"><span class="fa fa-google-plus"></span></a>
  <a title="Pinterest Share" target="_blank" href="https://pinterest.com/pin/create/button/?url=http%3a%2f%2frichardsumilang.com%2fprogramming%2fjavascript%2fjquery%2fusing-jquery-mobile-in-a-ecmascript-6-project%2f&media=&description=Using%20jQuery%20mobile%20in%20a%20ECMAScript%206%20project"><span class="fa fa-pinterest"></span></a>
</div>


  </article>

  
<div id="disqus_thread"></div>
<script>
  var disqus_shortname = 'richardsumilang';
  var disqus_identifier = '505 http:\/\/www.richardsumilang.com\/blog\/?p=505';
  var disqus_url = 'http:\/\/richardsumilang.com\/programming\/javascript\/jquery\/using-jquery-mobile-in-a-ecmascript-6-project\/';

  (function() {
    if (window.location.hostname === "localhost") {
      return;
    }
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


  
<div id="support">
  <header>
    <h2>Support this blog</h2>
    <h3>Buy <em>yourself</em> ANYTHING!</h3>
  </header>

  <div class="details">
    That's right! Shop as you normally would using <a href="http://www.amazon.com?_encoding=UTF8&amp;tag=topseclabrics-20">Amazon.com</a>
    with <a href="http://www.amazon.com?_encoding=UTF8&amp;tag=topseclabrics-20">my affiliate link</a> and the commissions made go
    directly into keeping this blog healthy. It's that simple! The hardware and
    software costs used for this site comes out of my own pocket and it's
    expensive. Lets keep this site ad free :)
  </div>

  <h3 class="amazon">
    <i class="fa fa-amazon"></i> <a href="http://www.amazon.com?_encoding=UTF8&amp;tag=topseclabrics-20">Start shopping on Amazon.com now!</a>
  </h3>

  <p>
    Thank you!<br/>
    <em>Richard S.</em>
  </p>
</div>

</section>


<footer id="sub-footer">

  
    <a href="http://facebook.com/pages/Richard-Sumilang/1671943293041280" title="Add me on Facebook" target="_blank"><span class="fa fa-facebook"></span> Facebook</a>
  

  
    <a href="http://twitter.com/rsumilang" title="@rsumilang on Twitter" target="_blank"><span class="fa fa-twitter"></span> Twitter</a>
  

  
  <a href="http://instagram.com/RichardSumilang" title="Follow me on Instagram" target="_blank"><span class="fa fa-instagram"></span> Instagram</a>
  

  
    <a href="https://www.linkedin.com/in/richardsumilang" title="Linkedin" target="_blank"><span class="fa fa-linkedin"></span> LinkedIn</a>
  

  
    <a href="https://plus.google.com/103897788753346013902/posts" title="Google+" target="_blank"><span class="fa fa-google-plus"></span> Google+</a>
  

  
    <a href="https://www.pinterest.com/rsumilang/" title="Pinterest" target="_blank"><span class="fa fa-pinterest"></span> Pinterest</a>
  

  
    <a href="https://www.youtube.com/channel/UCoa8wraKQsA95Y691K4kTsA" title="YouTube" target="_blank"><span class="fa fa-youtube"></span> YouTube</a>
  

  
    <a href="https://github.com/rsumilang" title="rsumilang on GitHub" target="_blank"><span class="fa fa-github"></span> GitHub</a>
  
</footer>


<footer id="footer">
  <div class="info">
    <div class="column about">
      <h3 class="title">About the Author</h3>
      <p><img width="80" class="user-icon" src="http://richardsumilang.com/images/me.png" alt="icon" />
        I'm Richard Sumilang, an entrepreneur and DIY'er at heart but often
        mistaken for a Developer. (Supposedly says so on my resume.)
      </p>
      <p>I am based in the Los Angeles area and you can reach me via <a href="mailto:me@richardsumilang.com">email</a> if you promise not to spam :)</p>
    </div>
    <div class="column categories">
      <h3 class="title">Categories</h3>
      <ul>
        
        
        <li><a href="/categories/apps">apps</a></li>
        
        <li><a href="/categories/electronics">electronics</a></li>
        
        <li><a href="/categories/etc">etc</a></li>
        
        <li><a href="/categories/networking">networking</a></li>
        
        <li><a href="/categories/programming">programming</a></li>
        
        <li><a href="/categories/servers">servers</a></li>
        
        <li><a href="/categories/unix-like">unix-like</a></li>
        
      </ul>
    </div>
    <div class="column stay-in-touch">
      <h3 class="title">Stay in touch</h3>
      <p>
        Join my periodic <a href="http://eepurl.com/bwckhL">newsletter</a>
        (I promise not to spam) and/or stay follow a little closer with my
        occasional rants on <a  href="http://twitter.com/rsumilang" title="@rsumilang on Twitter" target="_blank">twitter</a>.
      </p>
      <p>Geeks should know that my public work is on
        <a href="https://github.com/rsumilang" title="rsumilang on GitHub" target="_blank">Github</a>! Even this blog.</p>
    </div>
  </div>
  <div class="footer-bottom">
    <span>Copyright 2015. Richard Sumilang</span>
  </div>
</footer>


<script src="http://richardsumilang.com/js/common.js"></script>
<script src="http://richardsumilang.com/js/app.js"></script>

<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38936074-1']);
  _gaq.push(['_trackPageview']);
  (function () {
  var ga = document.createElement('script');
  ga.type = 'text/javascript';
  ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';

  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(ga, s);
  })();
</script>



</body>
</html>

